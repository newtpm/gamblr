<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Net Position After 30 Games | Something</title>
  <meta name="description" content="Gambling Simulations" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Net Position After 30 Games | Something" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Gambling Simulations" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Net Position After 30 Games | Something" />
  
  <meta name="twitter:description" content="Gambling Simulations" />
  

<meta name="author" content="Paul Newton" />


<meta name="date" content="2020-10-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lets-play-100000-games-of-keno.html"/>
<link rel="next" href="p.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i><b>1.1</b> About the Author</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#gambling-and-morality"><i class="fa fa-check"></i><b>1.2</b> Gambling and Morality</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#a-work-in-progress"><i class="fa fa-check"></i><b>1.3</b> A Work in Progress</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>2</b> Literature</a></li>
<li class="chapter" data-level="3" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>3</b> Gambling &amp; Probabilities</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="keno.html"><a href="keno.html"><i class="fa fa-check"></i><b>5</b> Keno</a></li>
<li class="chapter" data-level="6" data-path="the-game-of-keno.html"><a href="the-game-of-keno.html"><i class="fa fa-check"></i><b>6</b> The Game of Keno</a><ul>
<li class="chapter" data-level="6.1" data-path="the-game-of-keno.html"><a href="the-game-of-keno.html#simulating-a-game-in-r"><i class="fa fa-check"></i><b>6.1</b> Simulating A Game in R</a><ul>
<li class="chapter" data-level="6.1.1" data-path="the-game-of-keno.html"><a href="the-game-of-keno.html#fair-bets-expected-values"><i class="fa fa-check"></i><b>6.1.1</b> Fair Bets &amp; Expected Values</a></li>
<li class="chapter" data-level="6.1.2" data-path="the-game-of-keno.html"><a href="the-game-of-keno.html#the-play_keno-function"><i class="fa fa-check"></i><b>6.1.2</b> The <code>play_keno</code> Function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lets-play-100000-games-of-keno.html"><a href="lets-play-100000-games-of-keno.html"><i class="fa fa-check"></i><b>7</b> Let’s Play 100,000 Games of Keno</a></li>
<li class="chapter" data-level="8" data-path="net-position-after-30-games.html"><a href="net-position-after-30-games.html"><i class="fa fa-check"></i><b>8</b> Net Position After 30 Games</a></li>
<li class="chapter" data-level="9" data-path="p.html"><a href="p.html"><i class="fa fa-check"></i><b>9</b> P</a></li>
<li class="chapter" data-level="10" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>10</b> Conclusion</a><ul>
<li class="chapter" data-level="10.1" data-path="conclusion.html"><a href="conclusion.html#reconciling-to-original-manual-in-a-restaurant-analysis"><i class="fa fa-check"></i><b>10.1</b> Reconciling to Original (Manual in a Restaurant) Analysis</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>11</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Something</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="net-position-after-30-games" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Net Position After 30 Games</h1>
<p>With an EV of 0 cents. we would expect to have $0 in our pocket after wagering $30 across 30 games. But no one plays Keno for the expected value, it is the big prizes that attracts players. So let’s play 30 games, 1,000 times, and see what our ending balances are after this defined gameset.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="net-position-after-30-games.html#cb18-1"></a>games &lt;-<span class="st"> </span><span class="dv">30</span></span>
<span id="cb18-2"><a href="net-position-after-30-games.html#cb18-2"></a>sims2 &lt;-<span class="st"> </span><span class="dv">1000</span></span>
<span id="cb18-3"><a href="net-position-after-30-games.html#cb18-3"></a></span>
<span id="cb18-4"><a href="net-position-after-30-games.html#cb18-4"></a>plays2 &lt;-<span class="st"> </span><span class="kw">tibble</span>()</span>
<span id="cb18-5"><a href="net-position-after-30-games.html#cb18-5"></a></span>
<span id="cb18-6"><a href="net-position-after-30-games.html#cb18-6"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>sims2) {</span>
<span id="cb18-7"><a href="net-position-after-30-games.html#cb18-7"></a>  </span>
<span id="cb18-8"><a href="net-position-after-30-games.html#cb18-8"></a>  games_batch &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">30</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># for each sim</span></span>
<span id="cb18-9"><a href="net-position-after-30-games.html#cb18-9"></a><span class="st">    </span><span class="kw">map_dfr</span>(<span class="cf">function</span>(x) <span class="kw">play_keno</span>(spots)) <span class="op">%&gt;%</span></span>
<span id="cb18-10"><a href="net-position-after-30-games.html#cb18-10"></a><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">Net =</span> <span class="kw">sum</span>(Net)) <span class="op">%&gt;%</span></span>
<span id="cb18-11"><a href="net-position-after-30-games.html#cb18-11"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">Sim =</span> i) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># calc cumulative sum</span></span>
<span id="cb18-12"><a href="net-position-after-30-games.html#cb18-12"></a><span class="st">    </span><span class="kw">relocate</span>(Sim)</span>
<span id="cb18-13"><a href="net-position-after-30-games.html#cb18-13"></a>    </span>
<span id="cb18-14"><a href="net-position-after-30-games.html#cb18-14"></a>   plays2 &lt;-<span class="st"> </span>plays2 <span class="op">%&gt;%</span></span>
<span id="cb18-15"><a href="net-position-after-30-games.html#cb18-15"></a><span class="st">     </span><span class="kw">bind_rows</span>(games_batch) <span class="op">%&gt;%</span></span>
<span id="cb18-16"><a href="net-position-after-30-games.html#cb18-16"></a><span class="st">     </span><span class="kw">mutate</span>(<span class="dt">Color =</span> <span class="kw">factor</span>(<span class="kw">case_when</span>(</span>
<span id="cb18-17"><a href="net-position-after-30-games.html#cb18-17"></a>       Net <span class="op">&lt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">~</span><span class="st"> &quot;-$30 - $0 Loss&quot;</span>,</span>
<span id="cb18-18"><a href="net-position-after-30-games.html#cb18-18"></a>       Net <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>Net <span class="op">&lt;=</span><span class="st"> </span><span class="dv">30</span> <span class="op">~</span><span class="st"> &quot;$1-$30 Gain&quot;</span>,</span>
<span id="cb18-19"><a href="net-position-after-30-games.html#cb18-19"></a>       Net <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>Net <span class="op">&lt;=</span><span class="st"> </span><span class="dv">60</span> <span class="op">~</span><span class="st"> &quot;$31-$60 Gain&quot;</span>,</span>
<span id="cb18-20"><a href="net-position-after-30-games.html#cb18-20"></a>       Net <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>Net <span class="op">&lt;=</span><span class="st"> </span><span class="dv">90</span> <span class="op">~</span><span class="st"> &quot;$61-$90 Gain&quot;</span>,</span>
<span id="cb18-21"><a href="net-position-after-30-games.html#cb18-21"></a>       <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;&gt;$90 Gain&quot;</span> )))</span>
<span id="cb18-22"><a href="net-position-after-30-games.html#cb18-22"></a>  </span>
<span id="cb18-23"><a href="net-position-after-30-games.html#cb18-23"></a>}</span>
<span id="cb18-24"><a href="net-position-after-30-games.html#cb18-24"></a></span>
<span id="cb18-25"><a href="net-position-after-30-games.html#cb18-25"></a><span class="kw">ggplot</span>(plays2, <span class="kw">aes</span>(Sim, Net, <span class="dt">color =</span> Color)) <span class="op">+</span></span>
<span id="cb18-26"><a href="net-position-after-30-games.html#cb18-26"></a><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> <span class="fl">0.3</span>) <span class="op">+</span></span>
<span id="cb18-27"><a href="net-position-after-30-games.html#cb18-27"></a><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> <span class="kw">mean</span>(plays2<span class="op">$</span>Net))</span></code></pre></div>
<p><img src="gamblr_book_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="net-position-after-30-games.html#cb19-1"></a>summ_plays2 &lt;-<span class="st"> </span>plays2 <span class="op">%&gt;%</span></span>
<span id="cb19-2"><a href="net-position-after-30-games.html#cb19-2"></a><span class="st">  </span><span class="kw">group_by</span>(Color) <span class="op">%&gt;%</span></span>
<span id="cb19-3"><a href="net-position-after-30-games.html#cb19-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Count =</span> <span class="kw">n</span>(),</span>
<span id="cb19-4"><a href="net-position-after-30-games.html#cb19-4"></a>            <span class="dt">Mean =</span> <span class="kw">mean</span>(Net))</span></code></pre></div>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="net-position-after-30-games.html#cb21-1"></a><span class="kw">ggplot</span>(plays2, <span class="kw">aes</span>(Net)) <span class="op">+</span></span>
<span id="cb21-2"><a href="net-position-after-30-games.html#cb21-2"></a><span class="st">  </span><span class="kw">geom_histogram</span>(<span class="dt">binwidth =</span> <span class="dv">30</span>) </span></code></pre></div>
<p><img src="gamblr_book_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lets-play-100000-games-of-keno.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="p.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["gamblr_book.pdf", "gamblr_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
